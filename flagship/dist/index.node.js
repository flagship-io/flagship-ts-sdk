(()=>{var t={669:(t,e,n)=>{t.exports=n(609)},970:(t,e,n)=>{"use strict";var o=n(867),i=n(26),r=n(97),s=n(327),a=n(605),c=n(211),u=n(583).http,f=n(583).https,p=n(835),l=n(761),h=n(696),d=n(61),g=n(481),y=/https:?/;function v(t,e,n){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=n,e.auth){var o=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+o}t.beforeRedirect=function(t){t.headers.host=t.host,v(t,e,t.href)}}t.exports=function(t){return new Promise((function(e,n){var m=function(t){e(t)},b=function(t){n(t)},_=t.data,I=t.headers;if(I["User-Agent"]||I["user-agent"]||(I["User-Agent"]="axios/"+h.version),_&&!o.isStream(_)){if(Buffer.isBuffer(_));else if(o.isArrayBuffer(_))_=Buffer.from(new Uint8Array(_));else{if(!o.isString(_))return b(d("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));_=Buffer.from(_,"utf-8")}I["Content-Length"]=_.length}var C=void 0;t.auth&&(C=(t.auth.username||"")+":"+(t.auth.password||""));var O=r(t.baseURL,t.url),E=p.parse(O),x=E.protocol||"http:";if(!C&&E.auth){var A=E.auth.split(":");C=(A[0]||"")+":"+(A[1]||"")}C&&delete I.Authorization;var S=y.test(x),w=S?t.httpsAgent:t.httpAgent,N={path:s(E.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method.toUpperCase(),headers:I,agent:w,agents:{http:t.httpAgent,https:t.httpsAgent},auth:C};t.socketPath?N.socketPath=t.socketPath:(N.hostname=E.hostname,N.port=E.port);var P,k=t.proxy;if(!k&&!1!==k){var M=x.slice(0,-1)+"_proxy",T=process.env[M]||process.env[M.toUpperCase()];if(T){var j=p.parse(T),R=process.env.no_proxy||process.env.NO_PROXY,L=!0;if(R&&(L=!R.split(",").map((function(t){return t.trim()})).some((function(t){return!!t&&("*"===t||"."===t[0]&&E.hostname.substr(E.hostname.length-t.length)===t||E.hostname===t)}))),L&&(k={host:j.hostname,port:j.port,protocol:j.protocol},j.auth)){var D=j.auth.split(":");k.auth={username:D[0],password:D[1]}}}}k&&(N.headers.host=E.hostname+(E.port?":"+E.port:""),v(N,k,x+"//"+E.hostname+(E.port?":"+E.port:"")+N.path));var B=S&&(!k||y.test(k.protocol));t.transport?P=t.transport:0===t.maxRedirects?P=B?c:a:(t.maxRedirects&&(N.maxRedirects=t.maxRedirects),P=B?f:u),t.maxBodyLength>-1&&(N.maxBodyLength=t.maxBodyLength);var G=P.request(N,(function(e){if(!G.aborted){var n=e,r=e.req||G;if(204!==e.statusCode&&"HEAD"!==r.method&&!1!==t.decompress)switch(e.headers["content-encoding"]){case"gzip":case"compress":case"deflate":n=n.pipe(l.createUnzip()),delete e.headers["content-encoding"]}var s={status:e.statusCode,statusText:e.statusMessage,headers:e.headers,config:t,request:r};if("stream"===t.responseType)s.data=n,i(m,b,s);else{var a=[];n.on("data",(function(e){a.push(e),t.maxContentLength>-1&&Buffer.concat(a).length>t.maxContentLength&&(n.destroy(),b(d("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,r)))})),n.on("error",(function(e){G.aborted||b(g(e,t,null,r))})),n.on("end",(function(){var e=Buffer.concat(a);"arraybuffer"!==t.responseType&&(e=e.toString(t.responseEncoding),t.responseEncoding&&"utf8"!==t.responseEncoding||(e=o.stripBOM(e))),s.data=e,i(m,b,s)}))}}}));G.on("error",(function(e){G.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==e.code||b(g(e,t,null,G))})),t.timeout&&G.setTimeout(t.timeout,(function(){G.abort(),b(d("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",G))})),t.cancelToken&&t.cancelToken.promise.then((function(t){G.aborted||(G.abort(),b(t))})),o.isStream(_)?_.on("error",(function(e){b(g(e,t,null,G))})).pipe(G):G.end(_)}))}},448:(t,e,n)=>{"use strict";var o=n(867),i=n(26),r=n(372),s=n(327),a=n(97),c=n(109),u=n(985),f=n(61);t.exports=function(t){return new Promise((function(e,n){var p=t.data,l=t.headers;o.isFormData(p)&&delete l["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var d=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";l.Authorization="Basic "+btoa(d+":"+g)}var y=a(t.baseURL,t.url);if(h.open(t.method.toUpperCase(),s(y,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in h?c(h.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:o,config:t,request:h};i(e,n,r),h=null}},h.onabort=function(){h&&(n(f("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(f("Network Error",t,null,h)),h=null},h.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(f(e,t,"ECONNABORTED",h)),h=null},o.isStandardBrowserEnv()){var v=(t.withCredentials||u(y))&&t.xsrfCookieName?r.read(t.xsrfCookieName):void 0;v&&(l[t.xsrfHeaderName]=v)}if("setRequestHeader"in h&&o.forEach(l,(function(t,e){void 0===p&&"content-type"===e.toLowerCase()?delete l[e]:h.setRequestHeader(e,t)})),o.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){h&&(h.abort(),n(t),h=null)})),p||(p=null),h.send(p)}))}},609:(t,e,n)=>{"use strict";var o=n(867),i=n(849),r=n(321),s=n(185);function a(t){var e=new r(t),n=i(r.prototype.request,e);return o.extend(n,r.prototype,e),o.extend(n,e),n}var c=a(n(655));c.Axios=r,c.create=function(t){return a(s(c.defaults,t))},c.Cancel=n(263),c.CancelToken=n(972),c.isCancel=n(502),c.all=function(t){return Promise.all(t)},c.spread=n(713),c.isAxiosError=n(268),t.exports=c,t.exports.default=c},263:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},972:(t,e,n)=>{"use strict";var o=n(263);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new o(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},502:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,n)=>{"use strict";var o=n(867),i=n(327),r=n(782),s=n(572),a=n(185);function c(t){this.defaults=t,this.interceptors={request:new r,response:new r}}c.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},c.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],(function(t){c.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}})),o.forEach(["post","put","patch"],(function(t){c.prototype[t]=function(e,n,o){return this.request(a(o||{},{method:t,url:e,data:n}))}})),t.exports=c},782:(t,e,n)=>{"use strict";var o=n(867);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){o.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},97:(t,e,n)=>{"use strict";var o=n(793),i=n(303);t.exports=function(t,e){return t&&!o(e)?i(t,e):e}},61:(t,e,n)=>{"use strict";var o=n(481);t.exports=function(t,e,n,i,r){var s=new Error(t);return o(s,e,n,i,r)}},572:(t,e,n)=>{"use strict";var o=n(867),i=n(527),r=n(502),s=n(655);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return r(e)||(a(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{"use strict";t.exports=function(t,e,n,o,i){return t.config=e,n&&(t.code=n),t.request=o,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},185:(t,e,n)=>{"use strict";var o=n(867);t.exports=function(t,e){e=e||{};var n={},i=["url","method","data"],r=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(t,e){return o.isPlainObject(t)&&o.isPlainObject(e)?o.merge(t,e):o.isPlainObject(e)?o.merge({},e):o.isArray(e)?e.slice():e}function u(i){o.isUndefined(e[i])?o.isUndefined(t[i])||(n[i]=c(void 0,t[i])):n[i]=c(t[i],e[i])}o.forEach(i,(function(t){o.isUndefined(e[t])||(n[t]=c(void 0,e[t]))})),o.forEach(r,u),o.forEach(s,(function(i){o.isUndefined(e[i])?o.isUndefined(t[i])||(n[i]=c(void 0,t[i])):n[i]=c(void 0,e[i])})),o.forEach(a,(function(o){o in e?n[o]=c(t[o],e[o]):o in t&&(n[o]=c(void 0,t[o]))}));var f=i.concat(r).concat(s).concat(a),p=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===f.indexOf(t)}));return o.forEach(p,u),n}},26:(t,e,n)=>{"use strict";var o=n(61);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(o("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},527:(t,e,n)=>{"use strict";var o=n(867);t.exports=function(t,e,n){return o.forEach(n,(function(n){t=n(t,e)})),t}},655:(t,e,n)=>{"use strict";var o=n(867),i=n(16),r={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!o.isUndefined(t)&&o.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,c={adapter:("undefined"!=typeof XMLHttpRequest?a=n(448):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(a=n(970)),a),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),o.isFormData(t)||o.isArrayBuffer(t)||o.isBuffer(t)||o.isStream(t)||o.isFile(t)||o.isBlob(t)?t:o.isArrayBufferView(t)?t.buffer:o.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):o.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(t){c.headers[t]={}})),o.forEach(["post","put","patch"],(function(t){c.headers[t]=o.merge(r)})),t.exports=c},849:t=>{"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return t.apply(e,n)}}},327:(t,e,n)=>{"use strict";var o=n(867);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(o.isURLSearchParams(e))r=e.toString();else{var s=[];o.forEach(e,(function(t,e){null!=t&&(o.isArray(t)?e+="[]":t=[t],o.forEach(t,(function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),r=s.join("&")}if(r){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}},303:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},372:(t,e,n)=>{"use strict";var o=n(867);t.exports=o.isStandardBrowserEnv()?{write:function(t,e,n,i,r,s){var a=[];a.push(t+"="+encodeURIComponent(e)),o.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),o.isString(i)&&a.push("path="+i),o.isString(r)&&a.push("domain="+r),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},268:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},985:(t,e,n)=>{"use strict";var o=n(867);t.exports=o.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var o=t;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=o.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},16:(t,e,n)=>{"use strict";var o=n(867);t.exports=function(t,e){o.forEach(t,(function(n,o){o!==e&&o.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[o])}))}},109:(t,e,n)=>{"use strict";var o=n(867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,r,s={};return t?(o.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),e=o.trim(t.substr(0,r)).toLowerCase(),n=o.trim(t.substr(r+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}})),s):s}},713:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},867:(t,e,n)=>{"use strict";var o=n(849),i=Object.prototype.toString;function r(t){return"[object Array]"===i.call(t)}function s(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function c(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function u(t){return"[object Function]"===i.call(t)}function f(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),r(t))for(var n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:r,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isPlainObject:c,isUndefined:s,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:f,merge:function t(){var e={};function n(n,o){c(e[o])&&c(n)?e[o]=t(e[o],n):c(n)?e[o]=t({},n):r(n)?e[o]=n.slice():e[o]=n}for(var o=0,i=arguments.length;o<i;o++)f(arguments[o],n);return e},extend:function(t,e,n){return f(e,(function(e,i){t[i]=n&&"function"==typeof e?o(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},696:t=>{"use strict";t.exports=JSON.parse('{"name":"axios","version":"0.21.1","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.10.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},583:t=>{"use strict";t.exports=require("follow-redirects")},605:t=>{"use strict";t.exports=require("http")},211:t=>{"use strict";t.exports=require("https")},835:t=>{"use strict";t.exports=require("url")},761:t=>{"use strict";t.exports=require("zlib")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{APP_VERSION_CODE:()=>Vt,APP_VERSION_NAME:()=>Ut,CARRIER_NAME:()=>Bt,DEVICE_LOCALE:()=>At,DEVICE_MODEL:()=>wt,DEVICE_TYPE:()=>St,DecisionApiConfig:()=>D,DecisionMode:()=>S,Event:()=>q,EventCategory:()=>T,FLAGSHIP_CLIENT:()=>Ft,FLAGSHIP_VERSION:()=>Kt,FLAGSHIP_VISITOR:()=>qt,Flagship:()=>xt,FlagshipStatus:()=>u,HitAbstract:()=>F,HitType:()=>f,INTERFACE_NAME:()=>Ht,INTERNET_CONNECTION:()=>Gt,IP:()=>jt,Item:()=>Y,LOCATION_CITY:()=>Nt,LOCATION_COUNTRY:()=>kt,LOCATION_LAT:()=>Mt,LOCATION_LONG:()=>Tt,LOCATION_REGION:()=>Pt,LogLevel:()=>r,Modification:()=>G,OS_NAME:()=>Rt,OS_VERSION_CODE:()=>Dt,OS_VERSION_NAME:()=>Lt,Page:()=>Q,Screen:()=>J,Transaction:()=>$,Visitor:()=>N});var t=n(669),e=n.n(t);const i=require("events");var r,s=e().create({});if("undefined"==typeof window){var a=n(605).Agent,c=n(211).Agent;s.defaults.httpAgent=new a({keepAlive:!0}),s.defaults.httpsAgent=new c({keepAlive:!0})}!function(t){t[t.NONE=0]="NONE",t[t.EMERGENCY=1]="EMERGENCY",t[t.ALERT=2]="ALERT",t[t.CRITICAL=3]="CRITICAL",t[t.ERROR=4]="ERROR",t[t.WARNING=5]="WARNING",t[t.NOTICE=6]="NOTICE",t[t.INFO=7]="INFO",t[t.DEBUG=8]="DEBUG",t[t.ALL=9]="ALL"}(r||(r={}));var u,f,p="TypeScript",l="v2",h="ready",d="Key {0} must not be null. Default value is returned.",g="No modification for key {0}.",y="{0} must be a {1}",v="visitorId must not be null or empty",m="Method {0} is deactivated while SDK status is: {1}.",b="INITIALIZATION",_="UPDATE CONTEXT",I="GET MODIFICATION",C="GET MODIFICATION INFO",O="ACTIVE MODIFICATION",E="SEND HIT",x="application/json";!function(t){t[t.NOT_READY=0]="NOT_READY",t[t.NOT_INITIALIZED=0]="NOT_INITIALIZED",t[t.STARTING=1]="STARTING",t[t.POLLING=2]="POLLING",t[t.READY_PANIC_ON=3]="READY_PANIC_ON",t[t.READY=4]="READY"}(u||(u={})),function(t){t.PAGE_VIEW="PAGEVIEW",t.PAGE="PAGE",t.SCREEN_VIEW="SCREENVIEW",t.SCREEN="SCREEN",t.TRANSACTION="TRANSACTION",t.ITEM="ITEM",t.EVENT="EVENT"}(f||(f={}));var A,S,w=(A=function(t,e){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),N=function(t){function e(e){var n=t.call(this)||this;return n.visitorDelegate=e,n.visitorDelegate.on(h,(function(t){n.emit(h,t)})),n}return w(e,t),Object.defineProperty(e.prototype,"visitorId",{get:function(){return this.visitorDelegate.visitorId},set:function(t){this.visitorDelegate.visitorId=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anonymousId",{get:function(){return this.visitorDelegate.anonymousId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasConsented",{get:function(){return this.visitorDelegate.hasConsented},enumerable:!1,configurable:!0}),e.prototype.setConsent=function(t){this.visitorDelegate.setConsent(t)},Object.defineProperty(e.prototype,"config",{get:function(){return this.visitorDelegate.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.visitorDelegate.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modifications",{get:function(){return this.visitorDelegate.modifications},enumerable:!1,configurable:!0}),e.prototype.updateContext=function(t){this.visitorDelegate.updateContext(t)},e.prototype.clearContext=function(){this.visitorDelegate.clearContext()},e.prototype.getModification=function(t,e){return this.visitorDelegate.getModification(t,e)},e.prototype.getModificationSync=function(t,e){return this.visitorDelegate.getModificationSync(t,e)},e.prototype.getModificationInfo=function(t){return this.visitorDelegate.getModificationInfo(t)},e.prototype.getModificationInfoSync=function(t){return this.visitorDelegate.getModificationInfoSync(t)},e.prototype.synchronizeModifications=function(){return this.visitorDelegate.synchronizeModifications()},e.prototype.activateModification=function(t){return this.visitorDelegate.activateModification(t)},e.prototype.activateModificationSync=function(t){this.visitorDelegate.activateModificationSync(t)},e.prototype.sendHit=function(t){return this.visitorDelegate.sendHit(t)},e.prototype.sendHitSync=function(t){return this.visitorDelegate.sendHitSync(t)},e.prototype.getAllModifications=function(t){return void 0===t&&(t=!1),this.visitorDelegate.getAllModifications(t)},e.prototype.getModificationsForCampaign=function(t,e){return void 0===e&&(e=!1),this.visitorDelegate.getModificationsForCampaign(t,e)},e.prototype.authenticate=function(t){this.visitorDelegate.authenticate(t)},e.prototype.unauthenticate=function(){this.visitorDelegate.unauthenticate()},e}(i.EventEmitter);function P(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=t,i=0;i<e.length;i++){var r=e[i];o=o.replace(new RegExp("\\{"+i+"\\}","g"),r)}return o}function k(t,e,n){t&&t.logManager&&"function"==typeof t.logManager.error&&t.logLevel&&!(t.logLevel<r.ERROR)&&t.logManager.error(e,n)}function M(t,e,n){t&&t.logManager&&"function"==typeof t.logManager.info&&t.logLevel&&!(t.logLevel<r.INFO)&&t.logManager.info(e,n)}!function(t){t[t.DECISION_API=0]="DECISION_API",t[t.BUCKETING=1]="BUCKETING"}(S||(S={}));var T,j=function(){function t(t){var e=t.envId,n=t.apiKey,o=t.timeout,i=t.logLevel,s=t.logManager,a=t.statusChangedCallback,c=t.fetchNow,u=t.decisionMode,f=t.enableClientCache;this._envId=e,this._apiKey=n,this.logLevel=i||r.ALL,this.timeout=o||2,this.fetchNow=void 0===c||c,this.enableClientCache=void 0===f||f,this._decisionMode=u||S.DECISION_API,s&&(this.logManager=s),this.statusChangedCallback=a}return Object.defineProperty(t.prototype,"enableClientCache",{get:function(){return this._enableClientCache},set:function(t){this._enableClientCache=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBucketingSuccess",{get:function(){return this._onBucketingSuccess},set:function(t){this._onBucketingSuccess=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBucketingFail",{get:function(){return this._onBucketingFail},set:function(t){this._onBucketingFail=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBucketingUpdated",{get:function(){return this._onBucketingUpdated},set:function(t){this._onBucketingUpdated=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"envId",{get:function(){return this._envId},set:function(t){this._envId=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"apiKey",{get:function(){return this._apiKey},set:function(t){this._apiKey=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decisionMode",{get:function(){return this._decisionMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeout",{get:function(){return this._timeout},set:function(t){this._timeout=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fetchNow",{get:function(){return this._fetchNow},set:function(t){this._fetchNow=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pollingInterval",{get:function(){return this._pollingInterval},set:function(t){this._pollingInterval=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusChangedCallback",{get:function(){return this._statusChangedCallback},set:function(t){"function"==typeof t?this._statusChangedCallback=t:k(this,"statusChangedCallback must be a function","statusChangedCallback")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logManager",{get:function(){return this._logManager},set:function(t){this._logManager=t},enumerable:!1,configurable:!0}),t}(),R=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),L=function(){return(L=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},D=function(t){function e(e){return t.call(this,L(L({},e),{decisionMode:S.DECISION_API}))||this}return R(e,t),e}(j),B=function(){function t(t,e,n){this._config=t,this._decisionManager=e,this._trackingManager=n}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decisionManager",{get:function(){return this._decisionManager},set:function(t){this._decisionManager=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackingManager",{get:function(){return this._trackingManager},set:function(t){this._trackingManager=t},enumerable:!1,configurable:!0}),t}(),G=function(){function t(t,e,n,o,i,r){this._key=t,this._campaignId=e,this._variationGroupId=n,this._variationId=o,this._isReference=i,this._value=r}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"campaignId",{get:function(){return this._campaignId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variationGroupId",{get:function(){return this._variationGroupId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"variationId",{get:function(){return this._variationId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReference",{get:function(){return this._isReference},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),t}(),U=function(){function t(t,e){this._panic=!1,this._config=e,this._httpClient=t}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panic",{set:function(t){t?this.updateFlagshipStatus(u.READY_PANIC_ON):this.updateFlagshipStatus(u.READY),this._panic=t},enumerable:!1,configurable:!0}),t.prototype.statusChangedCallback=function(t){this._statusChangedCallback=t},t.prototype.updateFlagshipStatus=function(t){"function"==typeof this._statusChangedCallback&&this._statusChangedCallback&&this._statusChangedCallback(t)},t.prototype.getModifications=function(t){var e=new Map;return t.forEach((function(t){var n=t.variation.modifications.value;for(var o in n){var i=n[o];e.set(o,new G(o,t.id,t.variationGroupId,t.variation.id,t.variation.reference,i))}})),e},t.prototype.getCampaignsModificationsAsync=function(t){return e=this,n=void 0,i=function(){var e=this;return function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(n){return[2,new Promise((function(n,o){e.getCampaignsAsync(t).then((function(t){n(e.getModifications(t))})).catch((function(t){o(t)}))}))]}))},new((o=void 0)||(o=Promise))((function(t,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,a)}c((i=i.apply(e,n||[])).next())}));var e,n,o,i},t.prototype.isPanic=function(){return this._panic},t}(),V=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return V(e,t),e.prototype.getCampaignsAsync=function(t){return e=this,n=void 0,i=function(){var e=this;return function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(n){return[2,new Promise((function(n,o){var i,r=((i={})["x-api-key"]=""+e.config.apiKey,i["x-sdk-client"]=p,i["x-sdk-version"]=l,i["Content-Type"]=x,i),s={visitorId:t.visitorId,anonymousId:t.anonymousId,trigger_hit:!1,context:t.context},a="https://decision.flagship.io/v2/"+e.config.envId+"/campaigns?exposeAllKeys=true";t.hasConsented||(a+="&sendContextEvent=false"),e._httpClient.postAsync(a,{headers:r,timeout:e.config.timeout,body:s}).then((function(t){t.body.panic?e.panic=!0:e.panic=!1;var o=[];t.body.campaigns&&(o=t.body.campaigns),n(o)})).catch((function(t){k(e.config,JSON.stringify(t),"GET CAMPAIGNS"),o(t)}))}))]}))},new((o=void 0)||(o=Promise))((function(t,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,a)}c((i=i.apply(e,n||[])).next())}));var e,n,o,i},e}(U),F=function(){function t(t){this.type=t,this._anonymousId=null}return Object.defineProperty(t.prototype,"anonymousId",{get:function(){return this._anonymousId},set:function(t){this._anonymousId=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visitorId",{get:function(){return this._visitorId},set:function(t){this._visitorId=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ds",{get:function(){return this._ds},set:function(t){this._ds=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t},enumerable:!1,configurable:!0}),t.prototype.isNotEmptyString=function(t,e){return!(!t||"string"!=typeof t)||(k(this.config,P(y,e,"string"),e),!1)},t.prototype.isNumeric=function(t,e){return!(!t||"number"!=typeof t)||(k(this.config,P(y,e,"number"),e),!1)},t.prototype.isInteger=function(t,e){return t&&"number"==typeof t?(Number.isInteger(t)||k(this.config,P("value of {0} is not an {1}, it will be truncated to {1}",e,"integer"),e),!0):(k(this.config,P(y,e,"integer"),e),!1)},t.prototype.toApiKeys=function(){var t,e=((t={}).vid=this.visitorId,t.ds=this.ds,t.cid=""+this.config.envId,t.t=this.type,t);return this.visitorId&&this._anonymousId?(e.vid=this._anonymousId,e.cuid=this.visitorId):(e.vid=this._anonymousId||this.visitorId,e.cuid=null),e},t.prototype.isReady=function(){return!!(this.visitorId&&this.ds&&this.config&&this.config.envId&&this.type)},t}(),K=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(t){t.ACTION_TRACKING="ACTION_TRACKING",t.USER_ENGAGEMENT="USER_ENGAGEMENT"}(T||(T={}));var q=function(t){function e(e){var n=t.call(this,f.EVENT)||this,o=e.category,i=e.action,r=e.eventLabel,s=e.eventValue;return n.category=o,n.action=i,r&&(n.eventLabel=r),s&&(n.eventValue=s),n}return K(e,t),Object.defineProperty(e.prototype,"category",{get:function(){return this._category},set:function(t){t in T?this._category=t:k(this.config,"The category value must be either EventCategory::ACTION_TRACKING or EventCategory::ACTION_TRACKING","category")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"action",{get:function(){return this._action},set:function(t){this.isNotEmptyString(t,"action")&&(this._action=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventLabel",{get:function(){return this._eventLabel},set:function(t){this.isNotEmptyString(t,"eventLabel")&&(this._eventLabel=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventValue",{get:function(){return this._eventValue},set:function(t){this.isNumeric(t,"eventValue")&&(this._eventValue=t)},enumerable:!1,configurable:!0}),e.prototype.toApiKeys=function(){var e=t.prototype.toApiKeys.call(this);return e.ec=this.category,e.ea=this.action,this.eventLabel&&(e.el=this.eventLabel),this.eventValue&&(e.ev=this.eventValue),e},e.prototype.isReady=function(){return!!(t.prototype.isReady.call(this)&&this.category&&this.action)},e.prototype.getErrorMessage=function(){return"event category and event action are required"},e}(F),z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Y=function(t){function e(e){var n=t.call(this,f.ITEM)||this,o=e.transactionId,i=e.productName,r=e.productSku,s=e.itemCategory,a=e.itemPrice,c=e.itemQuantity;return n.transactionId=o,n.productName=i,n.productSku=r,s&&(n.itemCategory=s),a&&(n.itemPrice=a),c&&(n.itemQuantity=c),n}return z(e,t),Object.defineProperty(e.prototype,"transactionId",{get:function(){return this._transactionId},set:function(t){this.isNotEmptyString(t,"transactionId")&&(this._transactionId=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"productName",{get:function(){return this._productName},set:function(t){this.isNotEmptyString(t,"productName")&&(this._productName=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"productSku",{get:function(){return this._productSku},set:function(t){this.isNotEmptyString(t,"productSku")&&(this._productSku=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemPrice",{get:function(){return this._itemPrice},set:function(t){this.isNumeric(t,"itemPrice")&&(this._itemPrice=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemQuantity",{get:function(){return this._itemQuantity},set:function(t){this.isInteger(t,"itemQuantity")&&(this._itemQuantity=Math.trunc(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemCategory",{get:function(){return this._itemCategory},set:function(t){this.isNotEmptyString(t,"itemCategory")&&(this._itemCategory=t)},enumerable:!1,configurable:!0}),e.prototype.isReady=function(){return!!(t.prototype.isReady.call(this)&&this.transactionId&&this.productName&&this.productSku)},e.prototype.toApiKeys=function(){var e=t.prototype.toApiKeys.call(this);return e.tid=this.transactionId,e.in=this.productName,e.ic=this.productSku,this.itemPrice&&(e.ip=this.itemPrice),this.itemQuantity&&(e.iq=this.itemQuantity),this.itemCategory&&(e.iv=this.itemCategory),e},e.prototype.getErrorMessage=function(){return"Transaction Id, Item name and item code are required"},e}(F),W=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Q=function(t){function e(e){var n=t.call(this,f.PAGE_VIEW)||this;return n.documentLocation=null==e?void 0:e.documentLocation,n}return W(e,t),Object.defineProperty(e.prototype,"documentLocation",{get:function(){return this._documentLocation},set:function(t){this.isNotEmptyString(t,"documentLocation")&&(this._documentLocation=t)},enumerable:!1,configurable:!0}),e.prototype.isReady=function(){return!(!t.prototype.isReady.call(this)||!this.documentLocation)},e.prototype.toApiKeys=function(){var e=t.prototype.toApiKeys.call(this);return e.dl=this.documentLocation,e},e.prototype.getErrorMessage=function(){return"documentLocation url is required"},e}(F),Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),J=function(t){function e(e){var n=t.call(this,f.SCREEN_VIEW)||this;return n.documentLocation=null==e?void 0:e.documentLocation,n}return Z(e,t),Object.defineProperty(e.prototype,"documentLocation",{get:function(){return this._documentLocation},set:function(t){this.isNotEmptyString(t,"documentLocation")&&(this._documentLocation=t)},enumerable:!1,configurable:!0}),e.prototype.isReady=function(){return!(!t.prototype.isReady.call(this)||!this.documentLocation)},e.prototype.toApiKeys=function(){var e=t.prototype.toApiKeys.call(this);return e.dl=this.documentLocation,e},e.prototype.getErrorMessage=function(){return"Screen name is required"},e}(F),X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$=function(t){function e(e){var n=t.call(this,f.TRANSACTION)||this,o=e.transactionId,i=e.affiliation,r=e.taxes,s=e.currency,a=e.couponCode,c=e.itemCount,u=e.shippingMethod,p=e.paymentMethod,l=e.totalRevenue,h=e.shippingCosts;return n.transactionId=o,n.affiliation=i,r&&(n.taxes=r),s&&(n.currency=s),a&&(n.couponCode=a),c&&(n.itemCount=c),u&&(n.shippingMethod=u),p&&(n.paymentMethod=p),l&&(n.totalRevenue=l),h&&(n.shippingCosts=h),n}return X(e,t),Object.defineProperty(e.prototype,"transactionId",{get:function(){return this._transactionId},set:function(t){this.isNotEmptyString(t,"transactionId")&&(this._transactionId=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"affiliation",{get:function(){return this._affiliation},set:function(t){this.isNotEmptyString(t,"affiliation")&&(this._affiliation=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"taxes",{get:function(){return this._taxes},set:function(t){this.isNumeric(t,"taxes")&&(this._taxes=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currency",{get:function(){return this._currency},set:function(t){t&&"string"==typeof t&&3===t.length?this._currency=t:k(this.config,P("{0} must be a string and have exactly 3 letters","currency"),"currency")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"couponCode",{get:function(){return this._couponCode},set:function(t){this.isNotEmptyString(t,"couponCode")&&(this._couponCode=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._itemCount},set:function(t){this.isInteger(t,"itemCount")&&(this._itemCount=Math.trunc(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shippingMethod",{get:function(){return this._shippingMethod},set:function(t){this.isNotEmptyString(t,"shippingMethod")&&(this._shippingMethod=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paymentMethod",{get:function(){return this._paymentMethod},set:function(t){this.isNotEmptyString(t,"paymentMethod")&&(this._paymentMethod=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalRevenue",{get:function(){return this._totalRevenue},set:function(t){this.isNumeric(t,"totalRevenue")&&(this._totalRevenue=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shippingCosts",{get:function(){return this._shippingCosts},set:function(t){this.isNumeric(t,"shippingCosts")&&(this._shippingCosts=t)},enumerable:!1,configurable:!0}),e.prototype.isReady=function(){return!!(t.prototype.isReady.call(this)&&this.transactionId&&this.affiliation)},e.prototype.toApiKeys=function(){var e=t.prototype.toApiKeys.call(this);return e.tid=this.transactionId,e.ta=this.affiliation,this.taxes&&(e.tt=this.taxes),this.currency&&(e.tc=this.currency),this.couponCode&&(e.tcc=this.couponCode),this.itemCount&&(e.icn=this.itemCount),this.shippingMethod&&(e.sm=this.shippingMethod),this.paymentMethod&&(e.pm=this.paymentMethod),this.totalRevenue&&(e.tr=this.totalRevenue),this.shippingCosts&&(e.ts=this.shippingCosts),e},e.prototype.getErrorMessage=function(){return"Transaction Id and Transaction affiliation are required"},e}(F),tt=function(){function t(t,e){this._httpClient=t,this._config=e}return Object.defineProperty(t.prototype,"httpClient",{get:function(){return this._httpClient},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),t}(),et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return et(e,t),e.prototype.sendConsentHit=function(t){var e=this;return new Promise((function(n,o){var i,r,s=((i={}).t=f.EVENT,i.el="TypeScript:"+t.hasConsented,i.ea="fs_content",i.ec=T.USER_ENGAGEMENT,i.cid=e.config.envId,i.ds="APP",i);t.visitorId&&t.anonymousId?(s.vid=t.anonymousId,s.cuid=t.visitorId):(s.vid=t.anonymousId||t.visitorId,s.cuid=null);var a=((r={})["x-api-key"]=""+e.config.apiKey,r["x-sdk-client"]=p,r["x-sdk-version"]=l,r["Content-Type"]=x,r);e.httpClient.postAsync("https://ariane.abtasty.com",{headers:a,timeout:e.config.timeout,body:s}).then((function(){n()})).catch((function(t){o(t)}))}))},e.prototype.sendActive=function(t,e){var n,o,i=this,r=((n={})["x-api-key"]=""+this.config.apiKey,n["x-sdk-client"]=p,n["x-sdk-version"]=l,n["Content-Type"]=x,n),s=((o={}).vid=t.visitorId,o.vaid=e.variationId,o.caid=e.variationGroupId,o.cid=""+this.config.envId,o);return t.visitorId&&t.anonymousId?(s.vid=t.visitorId,s.aid=t.anonymousId):(s.vid=t.anonymousId||t.visitorId,s.aid=null),new Promise((function(t,e){i.httpClient.postAsync("https://decision.flagship.io/v2/activate",{headers:r,timeout:i.config.timeout,body:s}).then((function(){t()})).catch((function(t){e(t)}))}))},e.prototype.sendHit=function(t){var e,n=this,o=((e={})["x-api-key"]=""+this.config.apiKey,e["x-sdk-client"]=p,e["x-sdk-version"]=l,e["Content-Type"]=x,e);return new Promise((function(e,i){n.httpClient.postAsync("https://ariane.abtasty.com",{headers:o,timeout:n.config.timeout,body:t.toApiKeys()}).then((function(){e()})).catch((function(t){i(t)}))}))},e}(tt),ot=function(){function t(){}return t.prototype.getResponse=function(t){return{headers:t.headers,status:t.status,body:t.data}},t.prototype.getAsync=function(t,e){var n=this;return new Promise((function(o,i){s.get(t,{validateStatus:function(t){return t<400},headers:null==e?void 0:e.headers,timeout:1e3*((null==e?void 0:e.timeout)?e.timeout:2)}).then((function(t){o(n.getResponse(t))})).catch((function(t){i(t.message)}))}))},t.prototype.postAsync=function(t,e){var n=this;return new Promise((function(o,i){s.post(t,e.body,{validateStatus:function(t){return t<400},headers:e.headers,timeout:1e3*((null==e?void 0:e.timeout)?e.timeout:2)}).then((function(t){o(n.getResponse(t))})).catch((function(t){i(t.message)}))}))},t}(),it=function(){function t(){}return t.prototype.emergency=function(t,e){this.log(r.EMERGENCY,t,e)},t.prototype.alert=function(t,e){this.log(r.ALERT,t,e)},t.prototype.critical=function(t,e){this.log(r.CRITICAL,t,e)},t.prototype.error=function(t,e){this.log(r.ERROR,t,e)},t.prototype.warning=function(t,e){this.log(r.WARNING,t,e)},t.prototype.notice=function(t,e){this.log(r.NOTICE,t,e)},t.prototype.info=function(t,e){this.log(r.INFO,t,e)},t.prototype.debug=function(t,e){this.log(r.DEBUG,t,e)},t.prototype.log=function(t,e,n){var o=new Date,i=function(t){return 1===t.toString().length?"0"+t:t},s="["+i(o.getFullYear())+"-"+i(o.getMonth())+"-"+i(o.getDay())+" "+i(o.getHours())+":"+i(o.getMinutes())+"] [Flagship SDK] ["+r[t]+"] ["+n+"] : "+e;console.log(s)},t}(),rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),st=function(){return(st=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},at=function(t){function e(e){var n=t.call(this,st(st({},e),{decisionMode:S.BUCKETING}))||this;if(e){var o=e.pollingInterval,i=e.onBucketingFail,r=e.onBucketingSuccess,s=e.onBucketingUpdated;n.pollingInterval=null!=o?o:2,n.onBucketingFail=i,n.onBucketingSuccess=r,n.onBucketingUpdated=s}else n.pollingInterval=2;return n}return rt(e,t),e}(j),ct=function(){function t(t){this.visitor=t}return Object.defineProperty(t.prototype,"configManager",{get:function(){return this.visitor.configManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trackingManager",{get:function(){return this.configManager.trackingManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decisionManager",{get:function(){return this.configManager.decisionManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.visitor.config},enumerable:!1,configurable:!0}),t}(),ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ut(e,t),e.prototype.setConsent=function(t){var e=this,n="setConsent";this.visitor.hasConsented=t,this.hasTrackingManager(n)&&this.trackingManager.sendConsentHit(this.visitor).catch((function(t){k(e.config,t.message||t,n)}))},e.prototype.updateContextKeyValue=function(t,e){var n=typeof e;if("string"!=typeof t||""===t||"string"!==n&&"number"!==n&&"boolean"!==n)k(this.visitor.config,P("params {0} must be a non null String, and 'value' must be one of the following types , Number, Boolean",t),_);else{var o=this.getPredefinedContext(t,e);if(o){if(!o.check)return void k(this.config,P("Predefined Context {0} must be type of {1}",o.key,o.type),_);t=o.key}t.match(/^fs_/i)||(this.visitor.context[t]=e)}},e.prototype.updateContext=function(t){if(t)for(var e in t){var n=t[e];this.updateContextKeyValue(e,n)}else k(this.visitor.config,"Context must not to be null",_)},e.prototype.getPredefinedContext=function(t,e){if(t.match(/^{"key":".*",."type":"[a-z]*"}$/)){var n=JSON.parse(t),o=void 0;switch(n.type){case"string":o="string"==typeof e;break;case"number":o="number"==typeof e;break;default:o=!1}return{key:n.key,check:o,type:n.type}}return null},e.prototype.clearContext=function(){this.visitor.context={}},e.prototype.getModification=function(t,e){return Promise.resolve(this.getModificationSync(t,e))},e.prototype.checkAndGetModification=function(t,e){var n=this,o=t.key,i=t.defaultValue,r=t.activate;if(!o||"string"!=typeof o)return k(this.config,P(d,o),I),i;var s=this.visitor.modifications.get(o);if(!s)return k(this.config,P("No modification for key {0}. Default value is returned.",o),I),i;return"object"==typeof s.value&&"object"==typeof i&&Array.isArray(s.value)!==Array.isArray(i)||typeof s.value!=typeof i?(k(n.config,P("Modification for key {0} has a different type. Default value is returned.",o),I),s.value||!r&&!e||n.activateModificationSync(o),i):((r||e)&&this.activateModification(o),s.value)},e.prototype.getModificationSync=function(t,e){var n=this;return Array.isArray(t)?t.map((function(t){return n.checkAndGetModification(t,e)})):this.checkAndGetModification(t,e)},e.prototype.getModificationInfo=function(t){return Promise.resolve(this.getModificationInfoSync(t))},e.prototype.getModificationInfoSync=function(t){return t&&"string"==typeof t?this.visitor.modifications.get(t)||(k(this.visitor.config,P(g,t),C),null):(k(this.visitor.config,P(d,t),C),null)},e.prototype.synchronizeModifications=function(){var t=this;return new Promise((function(e){t.decisionManager.getCampaignsAsync(t.visitor).then((function(n){t.visitor.campaigns=n,t.visitor.modifications=t.decisionManager.getModifications(t.visitor.campaigns),t.visitor.emit(h),e()})).catch((function(n){t.visitor.emit(h,n),k(t.config,n.message||n,"SYNCHRONIZED MODIFICATION"),e()}))}))},e.prototype.activateModification=function(t){return Promise.resolve(this.activateModificationSync(t))},e.prototype.hasTrackingManager=function(t){var e=this.trackingManager;return e||k(this.config,P("trackerManager must not be null."),t),!!e},e.prototype.activate=function(t){var e=this,n=this.visitor.modifications.get(t);n?this.hasTrackingManager(O)&&this.trackingManager.sendActive(this.visitor,n).catch((function(t){k(e.config,t.message||t,O)})):k(this.visitor.config,P(g,t),O)},e.prototype.activateModificationSync=function(t){var e=this;t&&("string"==typeof t||Array.isArray(t))?"string"==typeof t?this.activate(t):Array.isArray(t)&&t.forEach((function(t){"string"==typeof t?e.activate(t):e.activate(t.key)})):k(this.config,P(d,t),O)},e.prototype.sendHit=function(t){return Promise.resolve(this.sendHitSync(t))},e.prototype.getHit=function(t){var e=null;switch(t.type.toUpperCase()){case f.EVENT:e=new q(t);break;case f.ITEM:e=new Y(t);break;case f.PAGE:case f.PAGE_VIEW:e=new Q(t);break;case f.SCREEN:case f.SCREEN_VIEW:e=new J(t);break;case f.TRANSACTION:e=new $(t)}return e},e.prototype.prepareAndSendHit=function(t){return e=this,n=void 0,i=function(){var e,n,o=this;return function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(i){if(t instanceof F)e=t;else{if(!(n=this.getHit(t)))return k(this.config,"property type is required and must ",E),[2];e=n}return e.visitorId=this.visitor.visitorId,e.ds="APP",e.config=this.config,e.anonymousId=this.visitor.anonymousId,e.isReady()?(this.trackingManager.sendHit(e).catch((function(t){k(o.config,t.message||t,E)})),[2]):(k(this.config,e.getErrorMessage(),E),[2])}))},new((o=void 0)||(o=Promise))((function(t,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,a)}c((i=i.apply(e,n||[])).next())}));var e,n,o,i},e.prototype.sendHitSync=function(t){var e=this;this.hasTrackingManager(E)&&(Array.isArray(t)?t.forEach((function(t){e.prepareAndSendHit(t)})):this.prepareAndSendHit(t))},e.prototype.getAllModifications=function(t){var e=this;return void 0===t&&(t=!1),t&&this.visitor.modifications.forEach((function(t,n){e.activateModification(n)})),Promise.resolve({visitorId:this.visitor.visitorId,campaigns:this.visitor.campaigns})},e.prototype.getModificationsForCampaign=function(t,e){var n=this;return void 0===e&&(e=!1),e&&this.visitor.modifications.forEach((function(e){e.campaignId===t&&n.activateModification(e.key)})),Promise.resolve({visitorId:this.visitor.visitorId,campaigns:this.visitor.campaigns.filter((function(e){return e.id===t}))})},e.prototype.authenticate=function(t){var e="authenticate";this.config.decisionMode!==S.BUCKETING?t?(this.visitor.anonymousId=this.visitor.visitorId,this.visitor.visitorId=t):k(this.config,v,e):this.logDeactivateOnBucketing(e)},e.prototype.unauthenticate=function(){var t="unauthenticate";this.config.decisionMode!==S.BUCKETING?this.visitor.anonymousId?(this.visitor.visitorId=this.visitor.anonymousId,this.visitor.anonymousId=null):k(this.config,"Visitor is not authenticated yet",t):this.logDeactivateOnBucketing(t)},e.prototype.logDeactivateOnBucketing=function(t){k(this.config,P("Method {0} is deactivated on Bucketing mode.",t),t)},e}(ct),pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pt(e,t),e.prototype.synchronizeModifications=function(){return this.log("synchronizeModifications"),Promise.resolve()},e.prototype.getModificationSync=function(t,e){return this.log("getModification"),Array.isArray(t)?t.map((function(t){return t.defaultValue})):t.defaultValue},e.prototype.getModificationInfoSync=function(t){return this.log("getModificationInfo"),null},e.prototype.activateModificationSync=function(t){this.log("activateModification")},e.prototype.sendHitSync=function(t){this.log("sendHit")},e.prototype.log=function(t){k(this.config,P(m,t,u[u.NOT_INITIALIZED]),t)},e}(ft),ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ht(e,t),e.prototype.setConsent=function(t){this.visitor.hasConsented=t,k(this.config,P("Send consent hit is deactivated while SDK status is: {1}.",u[u.READY_PANIC_ON]),"setConsent")},e.prototype.updateContext=function(t){this.log("updateContext")},e.prototype.clearContext=function(){this.log("clearContext")},e.prototype.getModificationSync=function(t,e){return this.log("getModification"),Array.isArray(t)?t.map((function(t){return t.defaultValue})):t.defaultValue},e.prototype.getModificationInfoSync=function(t){return this.log("getModificationInfo"),null},e.prototype.activateModificationSync=function(t){this.log("activateModification")},e.prototype.sendHitSync=function(t){this.log("sendHit")},e.prototype.log=function(t){k(this.config,P(m,t,u[u.READY_PANIC_ON]),t)},e}(ft),gt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gt(e,t),e.prototype.activateModificationSync=function(t){this.log("activateModification")},e.prototype.sendHitSync=function(t){this.log("sendHit")},e.prototype.log=function(t){k(this.config,P("Method {0} is deactivated for visitor {1} : visitor did not consent.",t,this.visitor.visitorId),t)},e}(ft),vt="FS_CLIENT_VISITOR",mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bt=function(t){function e(e){var n=this,o=e.visitorId,i=e.configManager,r=e.context,s=e.isAuthenticated,a=e.hasConsented;(n=t.call(this)||this)._configManager=i;var c=n.config.enableClientCache?function(){var t=null;try{t=localStorage.getItem(vt)}catch(t){}return t?JSON.parse(t):null}():null;return n.visitorId=o||(null==c?void 0:c.visitorId)||n.createVisitorId(),n._modifications=new Map,n.campaigns=[],n._context={},n.updateContext(r),n._anonymousId=(null==c?void 0:c.anonymousId)||null,n.loadPredefinedContext(),a||n.setConsent(null!=a&&a),n.hasConsented=null!=a&&a,!n._anonymousId&&s&&n.config.decisionMode===S.DECISION_API&&(n._anonymousId=n.uuidV4()),n.updateCache(),n}return mt(e,t),e.prototype.updateCache=function(){!function(t){try{localStorage.setItem(vt,JSON.stringify(t))}catch(t){}}({visitorId:this.visitorId,anonymousId:this.anonymousId})},e.prototype.loadPredefinedContext=function(){this.context.fs_client=p,this.context.fs_version=l,this.context.fs_users=this.visitorId},e.prototype.uuidV4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},e.prototype.createVisitorId=function(){var t=new Date,e=Math.floor(89999*Math.random()+1e4),n=function(t){return 1===t.toString().length?"0"+t:t};return""+t.getFullYear()+n(t.getMonth()+1)+n(t.getDate())+n(t.getHours())+n(t.getMinutes())+e},Object.defineProperty(e.prototype,"visitorId",{get:function(){return this._visitorId},set:function(t){t&&"string"==typeof t?this._visitorId=t:k(this.config,v,"VISITOR ID")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasConsented",{get:function(){return this._hasConsented},set:function(t){this._hasConsented=t},enumerable:!1,configurable:!0}),e.prototype.setConsent=function(t){this.getStrategy().setConsent(t)},Object.defineProperty(e.prototype,"context",{get:function(){return this._context},set:function(t){this._context={},this.updateContext(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modifications",{get:function(){return this._modifications},set:function(t){this._modifications=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"configManager",{get:function(){return this._configManager},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.configManager.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"campaigns",{get:function(){return this._campaigns},set:function(t){this._campaigns=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anonymousId",{get:function(){return this._anonymousId},set:function(t){this._anonymousId=t},enumerable:!1,configurable:!0}),e.prototype.getStrategy=function(){return xt.getStatus()&&xt.getStatus()!==u.NOT_INITIALIZED?xt.getStatus()===u.READY_PANIC_ON?new dt(this):this.hasConsented?new ft(this):new yt(this):new lt(this)},e}(i.EventEmitter),_t=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),It=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _t(e,t),e.prototype.updateContext=function(t){this.getStrategy().updateContext(t)},e.prototype.clearContext=function(){this.getStrategy().clearContext()},e.prototype.getModification=function(t,e){return this.getStrategy().getModification(t,e)},e.prototype.getModificationSync=function(t,e){return this.getStrategy().getModificationSync(t,e)},e.prototype.getModificationInfo=function(t){return this.getStrategy().getModificationInfo(t)},e.prototype.getModificationInfoSync=function(t){return this.getStrategy().getModificationInfoSync(t)},e.prototype.synchronizeModifications=function(){return this.getStrategy().synchronizeModifications()},e.prototype.activateModification=function(t){return this.getStrategy().activateModification(t)},e.prototype.activateModificationSync=function(t){return this.getStrategy().activateModificationSync(t)},e.prototype.sendHit=function(t){return this.getStrategy().sendHit(t)},e.prototype.sendHitSync=function(t){return this.getStrategy().sendHitSync(t)},e.prototype.getAllModifications=function(t){return void 0===t&&(t=!1),this.getStrategy().getAllModifications(t)},e.prototype.getModificationsForCampaign=function(t,e){return void 0===e&&(e=!1),this.getStrategy().getModificationsForCampaign(t,e)},e.prototype.authenticate=function(t){this.getStrategy().authenticate(t),this.updateCache()},e.prototype.unauthenticate=function(){this.getStrategy().unauthenticate(),this.updateCache()},e}(bt),Ct=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ot=function(t){function e(e,n,o){var i=t.call(this,e,n)||this;return i._murmurHash=o,i._isFirstPooling=!0,i}return Ct(e,t),e.prototype.initStartPolling=function(){0===this.config.pollingInterval&&(this._isPooling=!1),M(this.config,"Bucketing polling starts","startPolling"),this._isFirstPooling&&this.updateFlagshipStatus(u.POLLING)},e.prototype.finishLoop=function(t){if(200===t.status&&(this._bucketingContent=t.body),t.headers&&t.headers["last-modified"]){var e=t.headers["last-modified"];this._lastModified!==e&&this.config.onBucketingUpdated&&this.config.onBucketingUpdated(new Date(e)),this._lastModified=e}this._isFirstPooling&&(this._isFirstPooling=!1,this.updateFlagshipStatus(u.READY)),"function"==typeof this.config.onBucketingSuccess&&this.config.onBucketingSuccess({status:t.status,payload:this._bucketingContent})},e.prototype.startPolling=function(){var t,e,n,o,i;return e=this,n=void 0,i=function(){var e,n,o,i,r;return function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}(this,(function(s){switch(s.label){case 0:if(this._isPooling)return[2];this._isPooling=!0,this.initStartPolling(),s.label=1;case 1:return s.trys.push([1,4,,5]),e=P("https://cdn.flagship.io/{0}/bucketing.json",this.config.envId),(r={})["x-api-key"]=""+this.config.apiKey,r["x-sdk-client"]=p,r["x-sdk-version"]=l,r["Content-Type"]=x,n=r,this._lastModified&&(n["if-modified-since"]=this._lastModified),[4,this._httpClient.getAsync(e,{headers:n})];case 2:return o=s.sent(),this.finishLoop(o),[4,(a=1e3*(null!==(t=this.config.pollingInterval)&&void 0!==t?t:2),new Promise((function(t){return setTimeout(t,a)})))];case 3:return s.sent(),[3,5];case 4:return i=s.sent(),k(this.config,i,"startPolling dd"),this._isFirstPooling&&this.updateFlagshipStatus(u.NOT_INITIALIZED),"function"==typeof this.config.onBucketingFail&&this.config.onBucketingFail(new Error(i)),[3,5];case 5:if(this._isPooling)return[3,1];s.label=6;case 6:return M(this.config,"Bucketing polling stopped","startPolling"),[2]}var a}))},new((o=void 0)||(o=Promise))((function(t,r){function s(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,a)}c((i=i.apply(e,n||[])).next())}))},e.prototype.stopPolling=function(){this._isPooling=!1},e.prototype.sendContext=function(t){var e=this;return new Promise((function(n){var o,i=P("https://decision.flagship.io/v2/{0}/events",e.config.envId),r=((o={})["x-api-key"]=""+e.config.apiKey,o["x-sdk-client"]=p,o["x-sdk-version"]=l,o["Content-Type"]=x,o),s={visitorId:t.visitorId,type:"CONTEXT",data:t.context};e._httpClient.postAsync(i,{headers:r,body:s}).then((function(){n()})).catch((function(t){k(e.config,t,"sendContext")}))}))},e.prototype.getCampaignsAsync=function(t){var e=this;return this.sendContext(t),new Promise((function(n){if(e._bucketingContent){if(e._bucketingContent.panic)return e.panic=!0,void n([]);if(e.panic=!1,e._bucketingContent.campaigns){var o=[];e._bucketingContent.campaigns.forEach((function(n){var i=e.getVisitorCampaigns(n.variationGroups,n.id,t);i&&o.push(i)})),n(o)}else n([])}else n([])}))},e.prototype.getVisitorCampaigns=function(t,e,n){for(var o=0,i=t;o<i.length;o++){var r=i[o];if(this.isMatchTargeting(r,n)){var s=this.getVariation(r,n.visitorId);return s?{id:e,variation:s,variationGroupId:r.id}:null}}return null},e.prototype.getVariation=function(t,e){for(var n=this._murmurHash.murmurHash3Int32(t.id+e)%100,o=0,i=0,r=t.variations;i<r.length;i++){var s=r[i];if(void 0!==s.allocation&&n<(o+=s.allocation))return{id:s.id,modifications:s.modifications,reference:!!s.reference}}return null},e.prototype.isMatchTargeting=function(t,e){if(!t||!t.targeting||!t.targeting.targetingGroups)return!1;for(var n=0,o=t.targeting.targetingGroups;n<o.length;n++){var i=o[n];if(this.checkAndTargeting(i.targetings,e))return!0}return!1},e.prototype.checkAndTargeting=function(t,e){for(var n,o=!1,i=0,r=t;i<r.length;i++){var s=r[i],a=s.key;if("fs_all_users"===a){o=!0;break}if("fs_users"===a)n=e.visitorId;else{if(!(a in e.context))continue;n=e.context[a]}return this.testOperator(s.operator,n,s.value)}return o},e.prototype.testOperator=function(t,e,n){var o;switch(t){case"EQUALS":o=e===n;break;case"NOT_EQUALS":o=e!==n;break;case"CONTAINS":o=new RegExp(""+n.join("|")).test(e.toString());break;case"NOT_CONTAINS":o=!new RegExp(""+n.join("|")).test(e.toString());break;case"GREATER_THAN":o=e>n;break;case"LOWER_THAN":o=e<n;break;case"GREATER_THAN_OR_EQUALS":o=e>=n;break;case"LOWER_THAN_OR_EQUALS":o=e<=n;break;case"STARTS_WITH":o=new RegExp("^"+n).test(e.toString());break;case"ENDS_WITH":o=new RegExp(n+"$").test(e.toString());break;default:o=!1}return o},e}(U),Et=function(){function t(){}return t.prototype.murmurHash3Int32=function(t,e){var n,o,i,r;void 0===e&&(e=0);var s=3&t.length,a=t.length-s;n=e;var c=3432918353,u=461845907;for(r=0;r<a;)i=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24,++r,n=27492+(65535&(o=5*(65535&(n=(n^=i=(65535&(i=(i=(65535&i)*c+(((i>>>16)*c&65535)<<16)&4294967295)<<15|i>>>17))*u+(((i>>>16)*u&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(i=0,s){case 3:i^=(255&t.charCodeAt(r+2))<<16;case 2:i^=(255&t.charCodeAt(r+1))<<8;case 1:n^=i=(65535&(i=(i=(65535&(i^=255&t.charCodeAt(r)))*c+(((i>>>16)*c&65535)<<16)&4294967295)<<15|i>>>17))*u+(((i>>>16)*u&65535)<<16)&4294967295}return n^=t.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0},t}(),xt=function(){function t(){}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"configManager",{get:function(){return this._configManger},set:function(t){this._configManger=t},enumerable:!1,configurable:!0}),t.getInstance=function(){return this._instance||(this._instance=new this),this._instance},t.isReady=function(){var t,e,n,o,i=null===(e=null===(t=this._instance)||void 0===t?void 0:t.config)||void 0===e?void 0:e.apiKey,r=null===(o=null===(n=this._instance)||void 0===n?void 0:n.config)||void 0===o?void 0:o.envId;return!!this._instance&&!!i&&!!r},t.prototype.setStatus=function(t){var e=this.config.statusChangedCallback;if(this.config&&e&&this._status!==t)return this._status=t,void e(t);this._status=t},t.getStatus=function(){return this.getInstance()._status},t.getConfig=function(){return this.getInstance()._config},t.prototype.buildConfig=function(t){return t instanceof j?t:(null==t?void 0:t.decisionMode)===S.BUCKETING?new at(t):new D(t)},t.prototype.buildDecisionManager=function(t,e,n){var o,i=function(e){t.setStatus(e)};if(e.decisionMode===S.BUCKETING){var r=o=new Ot(n,e,new Et);o.statusChangedCallback(i),r.startPolling()}else(o=new H(n,e)).statusChangedCallback(i);return o},t.start=function(t,e,n){var o,i=this.getInstance();if((n=i.buildConfig(n)).envId=t,n.apiKey=e,i._config=n,i.setStatus(u.STARTING),n.logManager||(n.logManager=new it),!t||""===t||!e||""===e)return i.setStatus(u.NOT_INITIALIZED),void k(n,"Params 'envId' and 'apiKey' must not be null or empty.",b);var r=null===(o=i.configManager)||void 0===o?void 0:o.decisionManager;"object"==typeof r&&r instanceof Ot&&r.stopPolling();var s=new ot;r=i.buildDecisionManager(i,n,s);var a=new nt(s,n);i.configManager?(i.configManager.config=n,i.configManager.decisionManager=r,i.configManager.trackingManager=a):i.configManager=new B(n,r,a),this.isReady()?(i._status===u.STARTING&&i.setStatus(u.READY),M(n,P("Flagship SDK (version: {0}) READY",l),b)):i.setStatus(u.NOT_INITIALIZED)},t.newVisitor=function(t,e){var n,o,i,r;if(!this.isReady())return null;var s=!1,a=!1;"string"==typeof t||null===t?(i=t,r=e||{}):(i=t.visitorId||null,r=t.context||{},s=null!==(n=t.isAuthenticated)&&void 0!==n&&n,a=null!==(o=t.hasConsented)&&void 0!==o&&o);var c=new It({visitorId:i,context:r,isAuthenticated:s,hasConsented:a,configManager:this.getInstance().configManager}),u=new N(c);return this.getConfig().fetchNow&&u.synchronizeModifications(),u},t}(),At='{"key":"sdk_deviceLanguage", "type":"string"}',St='{"key":"sdk_deviceType", "type":"string"}',wt='{"key":"sdk_deviceModel", "type":"string"}',Nt='{"key":"sdk_city", "type":"string"}',Pt='{"key":"sdk_region", "type":"string"}',kt='{"key":"sdk_country", "type":"string"}',Mt='{"key":"sdk_lat", "type":"number"}',Tt='{"key":"sdk_long", "type":"number"}',jt='{"key":"sdk_ip", "type":"string"}',Rt='{"key":"sdk_osName", "type":"string"}',Lt='{"key":"sdk_osVersionName", "type":"string"}',Dt='{"key":"sdk_osVersionCode", "type":"number"}',Bt='{"key":"sdk_carrierName", "type":"string"}',Gt='{"key":"sdk_internetConnection", "type":"string"}',Ut='{"key":"sdk_versionName", "type":"string"}',Vt='{"key":"sdk_versionCode", "type":"number"}',Ht='{"key":"sdk_interfaceName", "type":"string"}',Ft='{"key":"fs_client", "type":"string"}',Kt='{"key":"fs_version", "type":"string"}',qt='{"key":"fs_users", "type":"string"}'})(),module.exports=o})();
//# sourceMappingURL=index.node.js.map